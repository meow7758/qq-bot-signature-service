{
  "name": "QQ Bot External Signer",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "qq-bot-external",
        "responseMode": "lastNode",
        "options": {}
      },
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [240, 300],
      "id": "webhook-1"
    },
    {
      "parameters": {
        "functionCode": "const body = $input.item.json.body;\nif (body.op === 13) {\n  const plainToken = body.d.plain_token;\n  const eventTs = body.d.event_ts;\n  // 这里我们需要调用外部 API 生成 Ed25519 签名\n  // 暂时返回错误提示\n  return {\n    json: {\n      error: 'Ed25519 signature required',\n      message: 'Please install tweetnacl library on n8n server',\n      plain_token: plainToken,\n      event_ts: eventTs\n    }\n  };\n}\nreturn {json: {msg: 'ok'}};"
      },
      "name": "Handler",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [440, 300],
      "id": "handler-1"
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Handler",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {}
}
